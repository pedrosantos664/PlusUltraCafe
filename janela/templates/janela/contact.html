{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlusUltraCafe</title>
    <link rel="icon" type="image/png" href="{% static 'imagens/favicon.jpg' %}">
    <link rel="stylesheet" href="{% static 'css/contact.css' %}">
</head>

<body>
    <nav>
        <div class="nav-left">
            <a href="{% url 'index' %}" class="logo">PlusUltraCafe</a>
            <div class="nav-links">
                <a href="{% url 'products' %}">Products</a>
                <a href="{% url 'contact' %}">Contact</a>
            </div>
        </div>

        <div class="nav-right">
            {% if user.is_authenticated %}
            <div class="auth-buttons">
                <span class="welcome-text">Ol√°, {{ user.first_name }}!</span>

                <a href="{% url 'logout' %}">Sair</a>
            </div>
            {% else %}
            <div class="auth-buttons">
                <a href="{% url 'login' %}">Sign in</a>
                <a href="{% url 'registro' %}">Register</a>
            </div>
            {% endif %}
        </div>
    </nav>


    <div class="form-container">
        <h2 class="form-title">Contact Us</h2>


        <div id="successMessage" class="success-message">
            Obrigado pela sua mensagem! Responderemos em breve.
        </div>

        <div id="errorMessage" class="error-message">
            Ocorreu um erro. Por favor, tente novamente mais tarde.
        </div>


        <form id="contactForm">
            {% csrf_token %}

            <div class="form-group">
                <label for="name" class="form-label">Name</label>
                <input type="text" id="name" name="from_name" class="form-input" placeholder="Your name" required>
            </div>

            <div class="form-group">
                <label for="surname" class="form-label">Surname</label>
                <input type="text" id="surname" name="from_surname" class="form-input" placeholder="Your surname"
                    required>
            </div>

            <div class="form-group">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" name="from_email" class="form-input" placeholder="Your email" required>
            </div>

            <div class="form-group">
                <label for="message" class="form-label">Message</label>
                <textarea id="message" name="message" class="form-input form-textarea" placeholder="Your message"
                    required></textarea>
            </div>

            <button type="submit" class="submit-btn">Send Message</button>
        </form>


    </div>


    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
    <script>

        emailjs.init("X5ZieltQKUiMfRhju");

        document.getElementById('contactForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const submitBtn = this.querySelector('.submit-btn');
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;


            emailjs.sendForm('service_lgud2en', 'template_ofjb6gq', this)
                .then(function () {
                    document.getElementById('successMessage').style.display = 'block';
                    document.getElementById('errorMessage').style.display = 'none';
                    document.getElementById('contactForm').reset();
                    submitBtn.textContent = 'Send Message';
                    submitBtn.disabled = false;
                }, function (error) {
                    document.getElementById('errorMessage').style.display = 'block';
                    document.getElementById('successMessage').style.display = 'none';
                    submitBtn.textContent = 'Send Message';
                    submitBtn.disabled = false;
                    console.error('Erro ao enviar:', error);
                });
        });
    </script>
</body>

</html>